<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="theme-color" content="#000000">
    <!--
      manifest.json provides metadata used when your web app is added to the
      homescreen on Android. See https://developers.google.com/web/fundamentals/engage-and-retain/web-app-manifest/
    -->
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json">
    <link rel="shortcut icon" href="%PUBLIC_URL%/favicon.ico">
    <title>React App</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="%PUBLIC_URL%/js/android/cordova.js"></script>
    <script src="%PUBLIC_URL%/js/js_lib/common.js"></script>
    
    <script type="text/javascript" charset="utf-8">
        function onLoad() {
          document.addEventListener("deviceready", onDeviceReady, false);
        }
        function onDeviceReady() {
          console.log("Device Ready");
          document.addEventListener("offline", checkConnection, false);
          document.addEventListener("online", checkConnection, false);
          console.log("App version:", AppVersion.version); // e.g. "1.2.3" 
          console.log("DONE");
          console.log("App version build: ", AppVersion.build); // e.g. 1234 
          
        }
        function checkConnection() {
          var networkState = navigator.connection.type;

          var states = {};
          states[Connection.UNKNOWN]  = 'Unknown connection';
          states[Connection.ETHERNET] = 'Ethernet connection';
          states[Connection.WIFI]     = 'WiFi connection';
          states[Connection.CELL_2G]  = 'Cell 2G connection';
          states[Connection.CELL_3G]  = 'Cell 3G connection';
          states[Connection.CELL_4G]  = 'Cell 4G connection';
          states[Connection.CELL]     = 'Cell generic connection';
          states[Connection.NONE]     = 'No network connection';

          alert('Connection type: ' + states[networkState]);
        }
        function hello() {
          console.log("Calling funciton hello()");
          QRScanner.prepare(onDone); // show the prompt
    
          var oldHTML = $('body')[0].innerHTML;
          function onDone(err, status){
            if (err) {
            console.error(err);
            }
            if (status.authorized) {
              console.log("Authorized");
              QRScanner.show()
              var newHTML = "<div><img src=\"scanner.png\"></div>";
              $('body').html(newHTML);
              QRScanner.scan(displayContents);
            } else if (status.denied) {
              console.log("Denied");
            } else {
              console.log("Cannot get permission");
            }
          }
    
          function displayContents(err, text){
            console.log("DisplayContents()");
            if(err){
              console.log("Scanning error occurred, or the scan was canceled");
            } else {
              alert("Scanning Success: " + text);
              QRScanner.hide();
              $('body').html(oldHTML);
            }
          }
        }
    
        </script>
  </head>
  <body onload="onLoad()" style="background: none">
    <noscript>
      You need to enable JavaScript to run this app.
    </noscript>
    <div id="root"></div>
  </body>

</html>
